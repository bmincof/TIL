# **테스트 코드 작성 순서**

1. 쉬운 것부터 테스트

   -> 보통 수 분에서 십여 분 이내에 구현을 완료해서 테스트를 통과시킬 수 있을만큼 쉬운 것을 선택한다.
   (남은 테스트 중에서 가장 구현하기 쉬운 테스트부터 선택해야한다.)

   한 번에 구현하는 시간이 짧아지면 디버깅할 때에 유리하다. 작성한 코드가 많지 않고 작성 시간도 짧아 기억이 잘나기 때문이다.

2. 예를 추가하면서 구현을 일반화

   이 과정에서 중복 제거와 같은 코드 정리, 예외 상황 처리를 반복적으로 진행한다.

# **예외 상황을 먼저 테스트해야 하는 이유**

다양한 예외 상황은 복잡한 if-else 블록을 동반할 때가 많다.

예외 상황을 전혀 고려하지 않은 코드에 예외 상황을 반영하려면 코드의 구조를 뒤집거나 코드를 복잡하게 만들어 버그 발생 가능성을 높인다.

# **완급 조절**

한 번에 얼마만큼의 코드를 작성할 것인지 선택하기

TDD를 처음 접할 때는 다음 단계에 따라 익혀보기

1. 정해진 값을 리턴
2. 값 비교를 이용해서 정해진 값을 리턴
3. 다양한 테스트를 추가하면서 구현을 일반화

몇 차례 상수를 사용해서 테스트를 통과시키고 뒤에 구현을 일반화하는 과정을 연습하는 것이 좋다.

# **지속적인 리팩토링**

테스트를 통과한 뒤에 적당한 리팩토링 대상이 보이면 리팩토링을 진행한다. (대표적으로 코드 중복, 변수명 변경 등)

일단 동작하는 코드를 만드는 능력도 중요하지만 소프트웨어를 지속적으로 개선해야하므로 코드를 잘 변경할 수 있는 능력도 중요하다.

리팩토링을 통해 코드를 변경하기 쉬운 구조를 가질 수 있다. 이는 소프트웨어의 생존 시간을 늘려준다.

# **TDD를 시작할 때 팁**

- 테스트할 목록을 미리 정리하면 좋다.

  ```
  1. 테스트할 내용을 정리하기
  2. 어떤 테스트가 구현이 쉬울지 또는 어떤 테스트가 예외적인지 생각해보기
  3. 테스트 과정에서 새로운 테스트 사례를 발견하면 목록에 추가해서 놓치지 않도록 하기
  4. 테스트를 한 번에 다 작성하지 않기 (리팩토링도 힘들고 심리적 저항이 생긴다)
  5. 변경 범위가 큰 리팩토링 대상을 발견하면 리팩토링을 진행하지 말고 테스트를 통과시키는 데 집중할 것 (할 일 목록에 추가해서 놓치지 않고 진행할 수 있도록 할 것)
  ```

- 시작이 안 될 때는 Assertion부터 고민하기

  ```
  테스트 코드의 검증 코드(Assertion)부터 역으로 작성해 나가면 도움이 될 수 있다.
  ```

- 코드에 변경이 있을 때마다 테스트를 실행시켜서 정상적으로 작동하는지 확인하기
